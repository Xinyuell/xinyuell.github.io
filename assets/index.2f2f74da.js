var e=Object.defineProperty,a=(a,t,o)=>(((a,t,o)=>{t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o})(a,"symbol"!=typeof t?t+"":t,o),o);import{d as t,r as o,c as l,o as n,a as s,b as r,e as c,w as i,f as u,t as d,u as m,E as p,g as h,h as f,i as g,j as C,k as y,l as v,_ as D,F as k,m as I,p as b,n as w,q as M,s as L,v as V,x as A,y as x,z as T,A as R,B as N,C as B}from"./vendor.bd5072f8.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)})).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?a.credentials="include":"anonymous"===e.crossorigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();const _=t({setup:e=>(e,a)=>{const t=o("router-view");return n(),l(t)}}),U={startGame:{btns:["为了孩子","为了拯救人类","为了感恩"],enterTitle:["你决定彻底消灭ACG文化","走上一条不被世界理解的道路"],enterTitle1:["你在大街上开始拦住路人宣讲、去图书馆演讲……","你大喊消灭ACG暴政，世界属于孩子！"],enterTitle2:["大城市ACG文化氛围太浓，垄断的文娱公司和被收买的无良媒体让你四处碰壁","你决定从从农村包围城市，先回到了老家"]},news:[["0级新闻测试1号","0级新闻测试2号","0级新闻测试3号","0级新闻测试4号","0级新闻测试5号","0级新闻测试6号","0级新闻测试7号","0级新闻测试8号","0级新闻测试9号","0级新闻测试10号","0级新闻测试11号"],["1级新闻测试1号","1级新闻测试2号","1级新闻测试3号","1级新闻测试4号","1级新闻测试5号","1级新闻测试6号"],["2级新闻测试1号2级新闻测试1号2级新闻测试1号2级新闻测试1号","2级新闻测试2号2级新闻测试1号2级新闻测试1号2级新闻测试1号","2级新闻测试3号2级新闻测试1号2级新闻测试1号2级新闻测试1号","2级新闻测试4号2级新闻测试1号2级新闻测试1号2级新闻测试1号2级新闻测试1号2级新闻测试1号2级新闻测试1号","2级新闻测试5号2级新闻测试1号2级新闻测试1号2级新闻测试1号2级新闻测试1号2级新闻测试1号2级新闻测试1号","2级新闻测试6号2级新闻测试1号2级新闻测试1号2级新闻测试1号2级新闻测试1号2级新闻测试1号2级新闻测试1号2级新闻测试1号2级新闻测试1号"]],guideTips:["解锁了金钱，金钱主要用于购买各项建筑以及研究ACG相关的知识。钱不是目的，只是手段，金钱对你来说如同粪土。你只是为了消灭ACG文化才收集了一点点钱。","解锁了动漫知识，这是一种研究资源，在研究分页内，解锁各项研究，加速你消灭ACG的进程。知己知彼百战百胜，我不入地狱谁入地狱。","你解锁了第一个信徒建筑，信徒是一群彻底追随你消灭ACG的助手，会帮你扩大影响力。前往小镇建设心理诊所吧。","信徒的增长比较缓慢，初始不会低于每10秒1个。随着信徒越来越多，由于聚众效应，他们增长的速度也会越快，但信徒的上限受心理诊所的数量限制。安排信徒工作吧，他们将代替你扩大影响力、赚取金钱和研究知识。每名信徒可提供1点影响力、2点金钱或者1点知识的速度（研究知识会消耗2倍的金钱）","你解锁了印刷店，这是一种金钱效率建筑。首先你得有信徒在赚取金钱，它才会生效，每个印刷店会提高10%的赚取金钱效率","你解锁了书店，这是一种研究效率建筑。与印刷店一样，它会提高10%的研究动漫知识的效率","你来到新的电力时代，网瘾治疗中心。他将提供一种新的伪信徒——从众，从众没有信徒虔诚，他们不会主动去消灭ACG文化，但会被动的跟随信徒活动，即从众不会提高你的影响力上限。但你可以安排他们工作，每个从众需要额外消耗1点金钱每秒。从众数量也受到信徒的影响，从众的增长速度和信徒的增长速度一样。当信徒达到上限后，从众将获得两倍的增长速度。","你解锁了游戏知识，这是另一种ACG文化，他的荼毒更深，所以需要深入研究。每1点游戏知识需要消耗10点金钱，且只能通过信徒/从众工作获取。","你解锁了举报功能！举报是一项伟大的发明，将那些看不顺眼的ACG文化通通举报吧！至于对错Who care。"],complain:[["错误的举报1","错误的举报2","错误的举报3","错误的举报4","错误的举报5"],["举报国内漫画1","举报国内漫画2","举报国内漫画3","举报国内漫画4","举报国内漫画5"],["举报国内动漫1","举报国内动漫2","举报国内动漫3","举报国内动漫4","举报国内动漫5"],["举报国内游戏1","举报国内游戏2","举报国内游戏3","举报国内游戏4","举报国内游戏5"],["举报国外漫画1","举报国外漫画2","举报国外漫画3","举报国外漫画4","举报国外漫画5"],["举报国外动漫1","举报国外动漫2","举报国外动漫3","举报国外动漫4","举报国外动漫5"],["举报国外游戏1","举报国外游戏2","举报国外游戏3","举报国外游戏4","举报国外游戏5"],["举报外太空漫画1","举报外太空漫画2","举报外太空漫画3","举报外太空漫画4","举报外太空漫画5"],["举报外太空动漫1","举报外太空动漫2","举报外太空动漫3","举报外太空动漫4","举报外太空动漫5"],["举报外太空游戏1","举报外太空游戏2","举报外太空游戏3","举报外太空游戏4","举报外太空游戏5"]],comlainLogTips:["；  哎呀，不小心举报到了不该举报的人。你的影响力大受打击","；  被你举报了。国内漫画行业大受打击，影响力开始下降","；  被你举报了。国内动漫行业发展停滞，影响力开始下降","；  被你举报了。国内游戏行业一蹶不振，影响力开始下降","；  被你举报了。国际漫画行业被重挫，影响力急剧下降","；  被你举报了。国际动漫行业回到起点，影响力急剧下降","；  被你举报了。国际游戏行业完全崩溃了，影响力急剧下降","；  被你举报了。外太空漫画行业在地球的市场全面萎缩，影响力大幅度下降","；  被你举报了。外太空动漫行业在地球的市场彻底垮台，影响力大幅度下降","；  被你举报了。外太空游戏行业在地球的市场遭遇毁灭性打击，影响大幅度下降"]};var P=(e,a)=>{for(const[t,o]of a)e[t]=o;return e};const G={class:"gametitle"};var S=P(t({setup(e){const a=s(U.startGame.enterTitle),t=s(U.startGame.btns);let l=0;const f=function(){0==l?(a[0]=U.startGame.enterTitle1[0],a[1]=U.startGame.enterTitle1[1]):1==l?(a[0]=U.startGame.enterTitle2[0],a[1]=U.startGame.enterTitle2[1]):2==l&&Oa.push("/game/build"),l++};return(e,l)=>{const s=o("el-header"),g=o("el-main"),C=o("el-container");return n(),r("div",null,[c(C,{style:{height:"100%"}},{default:i((()=>[c(s),c(g,null,{default:i((()=>[u("div",G,[u("div",null,d(m(a)[0]),1),u("div",null,d(m(a)[1]),1)]),u("div",null,[c(m(p),{class:"elButton",type:"success",onClick:f},{default:i((()=>[h(d(m(t)[0]),1)])),_:1})]),u("div",null,[c(m(p),{class:"elButton",type:"success",onClick:f},{default:i((()=>[h(d(m(t)[1]),1)])),_:1})]),u("div",null,[c(m(p),{class:"elButton",type:"success",onClick:f},{default:i((()=>[h(d(m(t)[2]),1)])),_:1})])])),_:1})])),_:1})])}}}),[["__scopeId","data-v-50d6b9aa"]]);const E=10,W=2,O=2,z=10,q=.05,K=10,j=Date.UTC(2016,7,1,0,0,0,0),F=2e4,J=50,$=43200;var Q,H,X,Y,Z,ee,ae,te,oe,le;(H=Q||(Q={}))[H.None=0]="None",H[H.ShowPanel=1]="ShowPanel",H[H.Research=2]="Research",H[H.AutoUnLock=4]="AutoUnLock",H[H.Upgrade=8]="Upgrade",(Y=X||(X={}))[Y.None=0]="None",Y[Y.Upgrade=1]="Upgrade",Y[Y.AddInfluence=2]="AddInfluence",Y[Y.AddMoeny=3]="AddMoeny",Y[Y.AddResearch=4]="AddResearch",(ee=Z||(Z={}))[ee.None=0]="None",ee[ee.Influence=1]="Influence",ee[ee.Money=2]="Money",ee[ee.Cost1=3]="Cost1",ee[ee.Cost2=4]="Cost2",ee[ee.Believer=5]="Believer",ee[ee.People=6]="People",(te=ae||(ae={}))[te.None=0]="None",te[te.InfluenceMoneyLevel1=1]="InfluenceMoneyLevel1",te[te.BelieverBuildLevel1=2]="BelieverBuildLevel1",te[te.MoneyBuildLevel1=3]="MoneyBuildLevel1",te[te.ResearchBuildLevel1=4]="ResearchBuildLevel1",te[te.BelieverInfluenceMax1=5]="BelieverInfluenceMax1",te[te.InfluenceMoneyLevel2=6]="InfluenceMoneyLevel2",te[te.BelieverBuildLevel2=7]="BelieverBuildLevel2",te[te.MoneyBuildLevel2=8]="MoneyBuildLevel2",te[te.ResearchBuildLevel2=9]="ResearchBuildLevel2",te[te.InfluenceMoneyLevel3=10]="InfluenceMoneyLevel3",te[te.BelieverInfluenceMax2=11]="BelieverInfluenceMax2",te[te.BelieverBuildCost1=12]="BelieverBuildCost1",te[te.MoneyBuildCost1=13]="MoneyBuildCost1",te[te.ResearchBuildCost1=14]="ResearchBuildCost1",te[te.ComplainUnLock=15]="ComplainUnLock",te[te.AutoComplainLevel1=16]="AutoComplainLevel1",te[te.AutoComplainLevel2=17]="AutoComplainLevel2",te[te.AutoComplainLevel3=18]="AutoComplainLevel3",(le=oe||(oe={}))[le.InfluenceMoney=0]="InfluenceMoney",le[le.BelieverAddInfluenceMax=1]="BelieverAddInfluenceMax",le[le.InfluenceBuildCost=2]="InfluenceBuildCost",le[le.MoneyBuildCost=3]="MoneyBuildCost",le[le.ResearchBuildCost=4]="ResearchBuildCost",le[le.MoneyRatio=5]="MoneyRatio",le[le.Cost1Ratio=6]="Cost1Ratio",le[le.Cost2Ratio=7]="Cost2Ratio",le[le.BelieverMax=8]="BelieverMax",le[le.PeopleMax=9]="PeopleMax";const ne=new Map([[1,{ID:1,Name:"影响力",Desc:"你对这个社会的影响力，很多事情都需要扩大影响力之后才能办到",TipsContent:"",BaseMax:100,Type:5}],[2,{ID:2,Name:"金钱",Desc:"钱不是目的，只是手段，金钱对你来说如同粪土",TipsContent:"你只是为了消灭ACG文化才收集了一点点钱",BaseMax:-1,Type:1}],[3,{ID:3,Name:"动漫知识",Desc:"知己知彼百战百胜，我不入地狱谁入地狱。",TipsContent:"在研究分页解锁各项研究",BaseMax:-1,Type:3}],[4,{ID:4,Name:"游戏知识",Desc:"知己知彼百战百胜，我不入地狱谁入地狱。",BaseMax:-1,TipsContent:"在研究分页解锁各项研究",Type:3}],[5,{ID:5,Name:"信徒",Desc:"信徒是一群彻底追随你消灭ACG的助手，会帮你扩大影响力。",BaseMax:10,TipsContent:"每个信徒提供1点基础的影响力速度，受各项研究和建筑的加成。安排信徒工作，每个信徒提升0.5%的效率。",Type:1}],[6,{ID:6,Name:"从众",Desc:"从众是一群伪信徒，他们暂时性的追随你，但你需要付出一些金钱",BaseMax:10,TipsContent:"每个从众提供1点额外的影响力速度。安排从众工作，每个从众也提升0.5%的效率。从众每秒消耗1的金钱",Type:1}]]);var se,re;(re=se||(se={}))[re.None=0]="None",re[re.AddInfluence=1]="AddInfluence",re[re.AddMoney=2]="AddMoney",re[re.AddResearch=3]="AddResearch",re[re.InfluenceLevel1=4]="InfluenceLevel1",re[re.MoneyLevel1=5]="MoneyLevel1",re[re.ResearchLevel1=6]="ResearchLevel1",re[re.InfulenceLevel2=7]="InfulenceLevel2",re[re.MoneyLevel2=8]="MoneyLevel2",re[re.ResearchLevel2=9]="ResearchLevel2";const ce=new Map([[1,{ID:1,Name:"街头闲聊",Desc:"在街边闲聊，宣传ACG文化的坏处，扩大你的影响力。点击获得1点影响力",Type:4,cityName:0,OnClickType:2,UpgradeCostRatio:0,Require:0,UpgradeCostPower:0,ResearchProp:new Map}],[2,{ID:2,Name:"家教服务",Desc:"为小镇居民提供家教服务，收取不菲的酬劳。点击获得2点金钱",Type:0,cityName:0,OnClickType:3,UpgradeCostRatio:0,UpgradeCostPower:0,Require:0,ResearchProp:new Map}],[3,{ID:3,Name:"买漫画书",Desc:"在业余时间你了解动漫知识，为伟大的计划奠定良好的基础。消耗2点金钱获得1点动漫知识",Type:0,cityName:0,OnClickType:4,UpgradeCostRatio:0,UpgradeCostPower:0,Require:0,ResearchProp:new Map}],[4,{ID:4,Name:"心理诊所",Desc:"拯救心理问题的ACG青年，信徒上限+10",Type:0,cityName:1,OnClickType:1,UpgradeCostRatio:3,UpgradeCostPower:2,Require:2,ResearchProp:new Map([[8,10]])}],[5,{ID:5,Name:"印刷店",Desc:"帮助你宣传的同时赚一点钱，信徒金钱工作效率+10%",Type:0,cityName:1,OnClickType:1,UpgradeCostRatio:4,UpgradeCostPower:2,Require:3,ResearchProp:new Map([[5,.1]])}],[6,{ID:6,Name:"书店",Desc:"在书店研究漫画知识更快，信徒研究动漫知识效率+10%",Type:0,cityName:1,OnClickType:1,UpgradeCostRatio:4,UpgradeCostPower:2.2,Require:4,ResearchProp:new Map([[6,.1]])}],[7,{ID:7,Name:"网瘾治疗中心",Desc:"一种电疗实验，从众上限+100",Type:0,cityName:2,OnClickType:1,UpgradeCostRatio:6,UpgradeCostPower:2.05,Require:7,ResearchProp:new Map([[9,100]])}],[8,{ID:8,Name:"广告公司",Desc:"宣传你的思想，同时获得了不菲收益。信徒金钱工作效率+20%",Type:0,cityName:2,OnClickType:1,UpgradeCostRatio:8,UpgradeCostPower:2.05,Require:8,ResearchProp:new Map([[5,.2]])}],[9,{ID:9,Name:"运营公司",Desc:"运营一些游戏再偷偷搞垮它们，获得了不少游戏的知识。信徒研究游戏知识效率+5%",Type:0,cityName:2,OnClickType:1,UpgradeCostRatio:8,UpgradeCostPower:2.1,Require:9,ResearchProp:new Map([[7,.05]])}]]),ie=new Map([[1,{ID:1,Name:"流量引导",Desc:"消耗20点动漫知识。影响力有了，钱就有了。每1点影响力获得0.01点的金钱速度。",Cost1:20,Cost2:0,UnLock:[2],Condition:0,ResearchProp:new Map([[0,.01]])}],[2,{ID:2,Name:"心理诊所",Desc:"消耗50点动漫知识。解锁心理诊所建筑。这将解锁信徒这种重要资源",Cost1:50,Cost2:0,UnLock:[3,4],Condition:0}],[3,{ID:3,Name:"印刷店",Desc:"消耗100点动漫知识。解锁印刷店建筑，这将有助于信徒金钱工作的效率。",Cost1:100,Cost2:0,UnLock:[],Condition:0}],[4,{ID:4,Name:"书店",Desc:"消耗200点动漫知识。解锁书店建筑，这将有助于信徒研究工作的效率。",Cost1:200,Cost2:0,UnLock:[5,6,7],Condition:0}],[5,{ID:5,Name:"虔诚信徒",Desc:"消耗1000点动漫知识。信徒更加虔诚了，消灭ACG的思想也广为流传。每个信徒提升150点影响力上限",Cost1:500,Cost2:0,UnLock:[],Condition:0,ResearchProp:new Map([[1,150]])}],[6,{ID:6,Name:"流量变现",Desc:"消耗2000点动漫知识。你的影响力越高，你获得的钱就更多，每1点影响力增加额外0.05的金钱速度",Cost1:2e3,Cost2:0,UnLock:[],Condition:0,ResearchProp:new Map([[0,.05]])}],[7,{ID:7,Name:"网瘾治疗中心",Desc:"进入下一级城市，需要影响力达到3000点。消耗5000点动漫知识。你来到了电力时代，解锁新的建筑，这将获得一大批从众。",Cost1:5e3,Cost2:0,UnLock:[8,9],Condition:3e3}],[8,{ID:8,Name:"广告公司",Desc:"消耗10K点动漫知识。解锁广告公司，进一步提高信徒/从众的工作效率",Cost1:1e4,Cost2:0,UnLock:[],Condition:0}],[9,{ID:9,Name:"运营中心",Desc:"消耗20K点动漫知识。解锁运营公司，进一步提高信徒/从众的研究效率",Cost1:2e4,Cost2:0,UnLock:[10,11],Condition:0}],[10,{ID:10,Name:"精准投放",Desc:"消耗50K点动漫知识和5000点游戏知识。一些人对你的思想还不感冒，你得找到合适的受众来宣传ACG的坏处。影响力额外增加0.1的金钱速度",Cost1:5e4,Cost2:5e3,UnLock:[],Condition:0,ResearchProp:new Map([[0,.1]])}],[11,{ID:11,Name:"狂热信徒",Desc:"消耗100K的动漫知识和10K的游戏知识。狂热的信徒四处宣传ACG的坏处，每名信徒额外提升500点影响力上限",Cost1:1e5,Cost2:1e4,UnLock:[12,13,14,15],Condition:0,ResearchProp:new Map([[1,500]])}],[15,{ID:15,Name:"举报",Desc:"消耗200K的动漫知识和20K的游戏知识。举报是一项划时代的发明，从此你可以真正打击ACG的发展了。",Cost1:2e5,Cost2:2e4,UnLock:[],Condition:0}]]);var ue,de;(de=ue||(ue={}))[de.InfluenceWork=0]="InfluenceWork",de[de.MoneyWork=1]="MoneyWork",de[de.Cost1Work=2]="Cost1Work",de[de.Cost2Work=3]="Cost2Work";const me=new Map([[0,{ID:0,Name:"扩大影响",Desc:"每个信徒/从众提升1点影响力每秒",Type:5}],[1,{ID:1,Name:"赚取金钱",Desc:"每个信徒/从众提升2点金钱每秒",Type:5}],[2,{ID:2,Name:"研究动漫",Desc:"每个信徒/从众消耗2点金钱，提升1点动漫知识每秒。（提升效率后消耗同比增加）",Type:5}],[3,{ID:3,Name:"研究游戏",Desc:"每个信徒/从众消耗10点金钱，提升1点游戏知识每秒。（提升效率后消耗同比增加）",Type:1}]]);function pe(e,a=1){return e>=1e4?function(e,a){for(let t=0;t<he.length;t++)if(e>=he[t].value/1.000501)return(e/he[t].value).toPrecision(a).replace(fe,"$1")+he[t].symbol;return e.toPrecision(a).replace(fe,"$1")}(e,3):parseFloat(e.toString()).toFixed(a)}let he=[{value:1e63,symbol:"V"},{value:1e60,symbol:"Nd"},{value:1e57,symbol:"Od"},{value:1e54,symbol:"Sd"},{value:1e51,symbol:"sd"},{value:1e48,symbol:"Qd"},{value:1e45,symbol:"qd"},{value:1e42,symbol:"Td"},{value:1e39,symbol:"Dd"},{value:1e36,symbol:"Ud"},{value:1e33,symbol:"Dc"},{value:1e30,symbol:"N"},{value:1e27,symbol:"O"},{value:1e24,symbol:"Sp"},{value:1e21,symbol:"Sx"},{value:1e18,symbol:"Qi"},{value:1e15,symbol:"Qa"},{value:1e12,symbol:"T"},{value:1e9,symbol:"B"},{value:1e6,symbol:"M"},{value:1e3,symbol:"K"}],fe=/\.0+$|(\.[0-9]*[1-9])0+$/;let ge=0,Ce=0;function ye(e){const a=Pe.state.gameData.sourceArr,t=Pe.state.gameData.buildArryList,o=Pe.state.gameData.workConfig,l=Pe.state.gameData.researchComplete,n=new Map;l.forEach((function(e){const a=ie.get(e).ResearchProp;void 0!==a&&a.forEach((function(e,a){n.set(a,e+(void 0===n.get(a)?0:n.get(a)))}))})),t.forEach((function(e,a){const t=e.ResearchProp;void 0!==t&&t.forEach((function(a,t){n.set(t,a*e.curValue+(void 0===n.get(t)?0:n.get(t)))}))})),function(e,a){e.forEach((function(e,t){let o;if(t===oe.BelieverMax&&(o=a.get(Z.Believer),o.cacheMaxValue=o.baseMaxValue+e),t===oe.PeopleMax&&(o=a.get(Z.People),o.cacheMaxValue=a.get(Z.People).baseMaxValue+e),t===oe.BelieverAddInfluenceMax&&(o=a.get(Z.Influence),o.cacheMaxValue=a.get(Z.People).baseMaxValue+e*a.get(Z.Believer).cacheValue),void 0===o)return;const l=pe(o.cacheMaxValue);l!==o.maxValue&&Pe.commit(Te,{index:o.ID,value:l})}))}(n,a);const s=function(e,a,t,o,l){const n=e.get(Z.Money);let s=t[ue.Cost1Work],r=t[ue.Cost2Work],c=e.get(Z.Believer).cacheValue,i=ve(),u=1*Math.max(0,i-c);s*=(1+(o.get(oe.Cost1Ratio)?o.get(oe.Cost1Ratio):0))*O,r*=(1+(o.get(oe.Cost2Ratio)?o.get(oe.Cost2Ratio):0))*z;let d=e.get(Z.Influence).cacheValue,m=t[ue.MoneyWork]*W;o.has(oe.InfluenceMoney)?d*=o.get(oe.InfluenceMoney):d=0;o.has(oe.MoneyRatio)&&(m*=1+o.get(oe.MoneyRatio));let p=m+d-u-s-r;n.cacheSpeed=p;let h=!1;if(p*l+n.cacheValue<=0){for(let e=0;e<t.length;e++)t[e]=0;h=!0}return h}(a,0,o,n,e);a.forEach((function(t,l){!function(e,a,t,o,l,n){if(!e.unlock)return;switch(e.ID){case Z.Influence:const t=o[ue.InfluenceWork];e.cacheSpeed=t;break;case Z.Cost1:let s=o[ue.Cost1Work];l.has(oe.Cost1Ratio)&&(s*=1+l.get(oe.Cost1Ratio)),e.cacheSpeed=s;break;case Z.Cost2:let r=o[ue.Cost2Work];l.has(oe.Cost2Ratio)&&(r*=1+l.get(oe.Cost2Ratio)),e.cacheSpeed=r;break;case Z.Believer:e.cacheSpeed=Math.max(.1,Math.pow(e.cacheValue,.5)*q);break;case Z.People:if(n)e.cacheSpeed=0;else{const t=a.get(Z.Believer);e.cacheSpeed=Math.max(.1,Math.pow(e.cacheValue,.5)*q),t.cacheMaxValue-e.cacheValue<=1e-5&&(e.cacheSpeed*=2)}}const s=pe(e.cacheSpeed,2);s!==e.speed&&Pe.commit(Re,{index:e.ID,value:s})}(t,a,0,o,n,s),function(e,a){if(e.unlock)return;switch(e.ID){case Z.Money:a.get(1).cacheValue>=10&&Pe.commit(_e,Z.Money);break;case Z.Cost1:a.get(1).cacheValue>=20&&Pe.commit(_e,Z.Cost1)}}(t,a),function(e,a,t){if(!e.unlock)return 0;const o=e.cacheSpeed*a;e.cacheValue+=o,e.cacheMaxValue>=0&&e.cacheValue>e.cacheMaxValue&&(e.cacheValue=e.cacheMaxValue);e.cacheValue<0&&(e.cacheValue=0);e.ID===Z.Influence&&(e.cacheValue>1e9?Pe.state.gameData.influenceLevel=4:e.cacheValue>1e7?Pe.state.gameData.influenceLevel=3:e.cacheValue>3e3?Pe.state.gameData.influenceLevel=2:e.cacheValue>100&&(Pe.state.gameData.influenceLevel=1));const l=pe(e.cacheValue);l!==e.curValue&&Pe.commit(xe,{index:t,value:l})}(t,e,l)})),t.forEach((function(e,t){!function(e,a,t,o){if(e.unlock)return;switch(e.ID){case se.AddMoney:a.get(1).cacheValue>=10&&(Pe.commit(Be,e.ID),ke(0));break;case se.AddResearch:a.get(1).cacheValue>=20&&(Pe.commit(Be,e.ID),ke(1));break;default:const t=ce.get(e.ID).Require;o.indexOf(t)>0&&Pe.commit(Be,e.ID)}}(e,a,0,l)})),function(e){Ce=De();let a=ve();if(Ce<a){let a=!1;return void(Pe.state.gameData.workConfig=e.map((function(e){return a?0:Ce<e?(a=!0,-Ce):(Ce-=e,0)})))}if(Math.floor(Ce-ge+1e-6)<1)return;if(ge=Ce,Pe.state.gameData.autoWorkIndex<0)return;Math.floor(Ce-a+1e-6)>1&&(Pe.commit(Ue,{index:Pe.state.gameData.autoWorkIndex,value:1}),ge++)}(o)}function ve(){let e=0;return Pe.state.gameData.workConfig.forEach((function(a){e+=a})),e}function De(){let e=0;return Pe.state.gameData.sourceArr.has(Z.Believer)&&(e+=Pe.state.gameData.sourceArr.get(Z.Believer).cacheValue),Pe.state.gameData.sourceArr.has(Z.People)&&(e+=Pe.state.gameData.sourceArr.get(Z.People).cacheValue),e}function ke(e){Pe.commit(Ne,e),Pe.state.openGuide=!0}var Ie,be;(be=Ie||(Ie={}))[be.Complain=0]="Complain",be[be.Fixed=1]="Fixed",be[be.Normal=2]="Normal",be[be.ComplainState=3]="ComplainState";const we=["top-left","top-right","bottom-right","bottom-left"];function Me(){if(this.logd)return;let e=this.message;const a=parseInt(this.title);e+=U.comlainLogTips[a];!function(e){const a=Pe.state.timelineLogs;if(a.length>=6){let e=-1;if(a.forEach(((a,t)=>{3===a.logType&&(e=t)})),e<0){const t={iconType:"success",color:"#67C23A",content:"",logType:3,rightCount:0,wrongCount:0};a.unshift(t),e=0}a.length;let t=a[e];Pe.state.timelineLogs=a.filter((function(e){return 0!==e.logType||("warning"===e.iconType?t.wrongCount++:t.rightCount++,!1)})),t.content="你一共举报成功: "+t.rightCount+"次；失败："+t.wrongCount+"次",a.length>=6&&(Pe.state.timelineLogs=a.filter((function(e){return 3===e.logType})))}Pe.state.timelineLogs.unshift(e)}({timestamp:Ve(),iconType:a>0?"success":"warning",color:a>0?"#67C23A":"#E6A23C",content:e,logType:0}),this.logd=!0}function Le(){if(setTimeout((()=>{Le()}),5e3*Math.random()+5e3),!Pe.state.running)return;if(Pe.state.gameData.researchComplete.indexOf(ae.ComplainUnLock)<0)return;const e=100*Math.random(),a=Math.floor(3*Math.random());let t=0,o=1e3;e<10?(t=0,o=1e3):e<70?(t=a+1,o=800):e<95?(t=a+4,o=600):(t=a+7,o=400);const l=U.complain[t],n=Math.floor(Math.random()*l.length),s=Math.floor(4*Math.random()),r=500*Math.random(),c={title:t.toString(),message:l[n],duration:o,position:we[s],offset:r,showClose:!1,onClick:Me};t>0?g.success(c):g.warning(c)}function Ve(){const e=j+Pe.state.gameData.totalTime*$;return new Date(e).toLocaleDateString()}class Ae{constructor(){a(this,"timer"),a(this,"resourceIDMap"),a(this,"buildIDMap"),a(this,"now"),a(this,"totalTime"),this.resourceIDMap=new Map,this.buildIDMap=new Map,this.timer=0,this.now=Date.now(),this.totalTime=0}Start(e){!function(e,a){const t=e.gameData;if(void 0===a)return e.haslog=!1,!1;const o=f.decode(a),l=JSON.parse(o);void 0===l||void 0===l.sourceArr||void 0===l.buildArryList?e.haslog=!1:(t.acgProgressData=l.acgProgressData,t.influenceLevel=l.influenceLevel,t.researchUnLockList=l.researchUnLockList,t.researchComplete=l.researchComplete,t.workConfig=l.workConfig,t.autoWorkIndex=l.autoWorkIndex,t.newsID=new Set(l.newsID),t.totalTime=l.totalTime,l.sourceArr.forEach((function(e){t.sourceArr.has(e.ID)&&(t.sourceArr.get(e.ID).cacheValue=e.cacheValue,t.sourceArr.get(e.ID).unlock=e.unlock)})),l.buildArryList.forEach((function(e){t.buildArryList.has(e.ID)&&(t.buildArryList.get(e.ID).curValue=e.curValue,t.buildArryList.get(e.ID).unlock=e.unlock)})),e.haslog=!0)}(e,window.localStorage.kill_acg_game),this.timer=setInterval((()=>{this.update()}),J),setInterval((()=>{this.saveGame()}),F),setTimeout((()=>{this.randomNews()}),3e4),setTimeout((()=>{Le()}),1e3),this.now=Date.now()}randomNews(){if(setTimeout((()=>{this.randomNews()}),12e4*Math.random()+2e4),Pe.state.gameData.influenceLevel<=0)return;if(!Pe.state.running)return;const e=U.news[Pe.state.gameData.influenceLevel-1],a=Math.floor(Math.random()*e.length);C.success({message:e[a],duration:1e4,showClose:!0,center:!0,iconClass:"info"})}saveGame(){const e=function(){if(!Pe.state.running)return;const e=Pe.state.gameData,a={sourceArr:[],buildArryList:[],acgProgressData:e.acgProgressData,influenceLevel:e.influenceLevel,researchUnLockList:e.researchUnLockList,researchComplete:e.researchComplete,workConfig:e.workConfig,autoWorkIndex:e.autoWorkIndex,newsID:Array.from(e.newsID),totalTime:e.totalTime};return e.sourceArr.forEach((function(e,t){a.sourceArr.push({cacheValue:e.cacheValue,unlock:e.unlock,ID:e.ID})})),e.buildArryList.forEach((function(e,t){a.buildArryList.push({curValue:e.curValue,unlock:e.unlock,ID:e.ID})})),a}(),a=f.encode(JSON.stringify(e));window.localStorage.setItem("kill_acg_game",a)}update(){if(!Pe.state.running)return void(this.now=Date.now());const e=Date.now()-this.now;Pe.state.gameData.totalTime+=e,this.now=Date.now(),ye(e/1e3)}}a(Ae,"buildLevelMax",4),a(Ae,"theme",0);const xe="modifyResourceCurValue",Te="modifyResourceMaxValue",Re="setResourceSpeed",Ne="updateGuideTips",Be="unlockBuild",_e="unlockResource",Ue="updateWorkConfig",Pe=y({state:{running:!1,haslog:!1,guideTipsID:-1,gameData:function(){const e={sourceArr:new Map([]),buildArryList:new Map([]),acgProgressData:{value:50,max:1e10,cur:5e9},influenceLevel:0,newsID:new Set,researchUnLockList:[1],researchComplete:[],workConfig:[0,0,0,0],autoWorkIndex:-1,totalTime:0},a=new Map([]);ne.forEach((function(e,t){a.set(e.ID,{resourceName:e.Name,cacheValue:0,cacheSpeed:0,cacheMaxValue:e.BaseMax,baseMaxValue:e.BaseMax,curValue:"0",maxValue:e.BaseMax.toString(),speed:"0",unlock:(e.Type&Q.AutoUnLock)>0,ID:e.ID,tip_title:e.Desc,tip_content:e.TipsContent})}));const t=new Map([]);return ce.forEach((function(e,a){t.set(e.ID,{buildName:e.Name,curValue:0,unlock:(e.Type&Q.AutoUnLock)>0,cityName:e.cityName,ID:e.ID,click:e.OnClickType,baseTips:e.Desc,upgradeCostRatio:e.UpgradeCostRatio,upgradeCostPower:e.UpgradeCostPower,ResearchProp:e.ResearchProp})})),e.sourceArr=a,e.buildArryList=t,e}(),openGuide:!1,timelineLogs:[]},mutations:{modifyResourceCurValue(e,a){e.gameData.sourceArr.has(a.index)&&(e.gameData.sourceArr.get(a.index).curValue=a.value)},modifyResourceMaxValue(e,a){e.gameData.sourceArr.has(a.index)&&(e.gameData.sourceArr.get(a.index).maxValue=a.value)},setResourceSpeed(e,a){e.gameData.sourceArr.has(a.index)&&(e.gameData.sourceArr.get(a.index).speed=a.value)},setGameRunning(e,a){e.running=a},replaceGameData(e,a){e.gameData=a},updateNews(e,a){e.gameData.newsID.add(a)},updateGuideTips(e,a){e.guideTipsID=a},completeResearch(e,a){e.gameData.researchComplete.push(a)},unlockResearch(e,a){a.forEach((function(a){e.gameData.researchUnLockList.push(a)}))},unlockBuild(e,a){e.gameData.buildArryList.has(a)&&(e.gameData.buildArryList.get(a).unlock=!0)},unlockResource(e,a){e.gameData.sourceArr.has(a)&&(e.gameData.sourceArr.get(a).unlock=!0)},updateWorkConfig(e,a){e.gameData.workConfig[a.index]+=a.value,e.gameData.workConfig[a.index]<0&&(e.gameData.workConfig[a.index]=0)},updateAutoWorkIndex(e,a){e.gameData.autoWorkIndex=a}}});const Ge=h("导入存档"),Se=h("导出存档"),Ee=h("复制");var We=P(t({setup(e){const a=v("");function t(){try{let e=f.decode(a.value);const t=JSON.parse(e);void 0!==t&&void 0!==t.cityUnlock&&void 0!==t.sourceArr&&void 0!==t.buildArryList?(Pe.commit("replaceGameData",t),Pe.state.haslog=!0,C.error({showClose:!0,message:"导入成功，继续游戏吧！"})):C.error({showClose:!0,message:"存档数据不合法，导入失败"})}catch{C.error({showClose:!0,message:"存档数据不合法，导入失败"})}}async function l(){if(void 0===Pe.state.gameData||!1===Pe.state.haslog)return void C.error({showClose:!0,message:"没有存档数据"});const e=f.encode(JSON.stringify(Pe.state.gameData));a.value=e;try{await s(a.value),C.error({message:"内容已经成功复制到剪切板",type:"success"})}catch(t){C.error({showClose:!0,message:"失败了"})}}const{toClipboard:s}=D(),u=async()=>{try{await s(a.value),C.error({message:"内容已经成功复制到剪切板",type:"success"})}catch(e){C.error({showClose:!0,message:"失败了"})}};return(e,s)=>{const d=o("el-input"),m=o("el-button");return n(),r(k,null,[c(d,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=e=>a.value=e),rows:5,type:"textarea"},null,8,["modelValue"]),c(m,{type:"primary",onClick:t,plain:""},{default:i((()=>[Ge])),_:1}),c(m,{type:"primary",onClick:l,plain:""},{default:i((()=>[Se])),_:1}),c(m,{type:"info",onClick:u,size:"mini",plain:""},{default:i((()=>[Ee])),_:1})],64)}}}),[["__scopeId","data-v-00a19da4"]]);const Oe={class:"home"},ze=h("载入/导出存档"),qe=h("成就"),Ke={class:"dialog-footer"},je=h("确认");var Fe=P(t({setup(e){const a=v(!1);function t(){Pe.state.haslog?Oa.push("/game/build"):Oa.push("/introduction")}function l(){a.value=!0}function s(){C.error({message:"敬请期待",type:"warning"})}return(e,m)=>{const p=o("el-button"),f=o("el-dialog");return n(),r(k,null,[u("div",Oe,[u("div",null,[c(p,{class:"elButton",type:"success",onClick:t,round:""},{default:i((()=>[h(d(Pe.state.haslog?"继续游戏":"新游戏"),1)])),_:1})]),u("div",null,[c(p,{class:"elButton",type:"success",onClick:l,round:""},{default:i((()=>[ze])),_:1})]),u("div",null,[c(p,{class:"elButton",type:"success",onClick:s,round:""},{default:i((()=>[qe])),_:1})])]),c(f,{modelValue:a.value,"onUpdate:modelValue":m[1]||(m[1]=e=>a.value=e),title:"导入之前最好保存一份存档",width:"30%"},{footer:i((()=>[u("span",Ke,[c(p,{type:"primary",onClick:m[0]||(m[0]=e=>a.value=!1)},{default:i((()=>[je])),_:1})])])),default:i((()=>[c(We)])),_:1},8,["modelValue"])],64)}}}),[["__scopeId","data-v-5b8cc60a"]]);const Je=e=>(b("data-v-12f7067d"),e=e(),w(),e),$e={class:"leftTable workTable"},Qe={style:{"margin-bottom":"0.2rem"}},He={id:"spantitle"},Xe={id:"workDataul"},Ye={class:"worktab"},Ze={class:"title"},ea={class:"number"},aa=Je((()=>u("span",null,null,-1))),ta={class:"worktab"},oa={class:"title"},la={class:"number"},na=Je((()=>u("span",null,null,-1))),sa={class:"worktab"},ra={class:"title"},ca={class:"number"},ia=Je((()=>u("span",null,null,-1))),ua={class:"worktab"},da={class:"title"},ma={class:"number"},pa=Je((()=>u("span",null,null,-1)));var ha=P(t({setup(e){const a=I((()=>{const e=Pe.state.gameData.workConfig,a=[];return me.forEach((function(t,o){a.push({count:e[o]?e[o]:0,Name:t.Name,ID:t.ID,Desc:t.Desc})})),a})),t=I((()=>{const e=Pe.state.gameData.workConfig,a=Pe.state.gameData.sourceArr;let t=0;a.has(Z.Believer)&&(t+=a.get(Z.Believer).cacheValue),a.has(Z.People)&&(t+=a.get(Z.People).cacheValue);let o=0;return e.forEach((e=>{o+=e})),Math.floor(t-o+1e-5)})),l=v(-1);function s(e){Pe.commit("updateAutoWorkIndex",e)}function p(e,a){let t=1;e.ctrlKey&&(t*=10),e.shiftKey&&(t*=25),e.altKey&&(t*=100);const o=Pe.state.gameData.sourceArr.get(Z.Money);let l=o.cacheValue+o.cacheSpeed;if(a===ue.Cost1Work?l/=O:ue.Cost2Work,l/=z,l=Math.floor(l),l<0)return;t=Math.min(t,l);let n=De(),s=ve();n>=s+t?Pe.commit(Ue,{index:a,value:t}):(t=Math.floor(n-s+1e-5),t>0&&Pe.commit(Ue,{index:a,value:t}))}function h(e,a){let t=1;e.ctrlKey&&(t*=10),e.shiftKey&&(t*=25),e.altKey&&(t*=100);const o=Pe.state.gameData.workConfig;o[a]>=t?Pe.commit(Ue,{index:a,value:-t}):(t=-o[a],Pe.commit(Ue,{index:a,value:t}))}function f(e){p(e,0)}function g(e){h(e,0)}function C(e){p(e,1)}function y(e){h(e,1)}function D(e){p(e,2)}function k(e){h(e,2)}function b(e){p(e,3)}function w(e){h(e,3)}const M=v(!1);let L=-1;function V(e){!1===e?(L=l.value,l.value=-1):(L<0&&(L=0),l.value=L),Pe.commit("updateAutoWorkIndex",l.value)}return(e,p)=>{const h=o("el-switch"),v=o("el-button"),I=o("el-radio");return n(),r("div",$e,[u("div",Qe,[u("span",He,"剩余人数："+d(m(t)),1),c(h,{modelValue:M.value,"onUpdate:modelValue":p[0]||(p[0]=e=>M.value=e),onChange:V,"active-text":"自动分配","inactive-text":"关闭",style:{"margin-left":"0.4rem","font-size":"0.4rem",display:"inline-block"}},null,8,["modelValue"])]),u("ul",Xe,[u("li",Ye,[u("span",Ze,d(m(a)[0].Name),1),u("span",ea,d(m(pe)(m(Pe).state.gameData.workConfig[m(a)[0].ID],0)),1),c(v,{type:"info",onClick:g,icon:"el-icon-d-arrow-left",size:"mini",circle:""}),c(v,{type:"info",icon:"el-icon-d-arrow-right",size:"mini",circle:"",onClick:f}),c(I,{style:{"margin-left":"0.2rem"},modelValue:l.value,"onUpdate:modelValue":p[1]||(p[1]=e=>l.value=e),onChange:s,label:m(a)[0].ID},{default:i((()=>[aa])),_:1},8,["modelValue","label"])]),u("li",ta,[u("span",oa,d(m(a)[1].Name),1),u("span",la,d(m(pe)(m(Pe).state.gameData.workConfig[m(a)[1].ID],0)),1),c(v,{onClick:y,type:"info",icon:"el-icon-d-arrow-left",size:"mini",circle:""}),c(v,{type:"info",icon:"el-icon-d-arrow-right",size:"mini",onClick:C,circle:""}),c(I,{style:{"margin-left":"0.2rem"},modelValue:l.value,"onUpdate:modelValue":p[2]||(p[2]=e=>l.value=e),onChange:s,label:m(a)[1].ID},{default:i((()=>[na])),_:1},8,["modelValue","label"])]),u("li",sa,[u("span",ra,d(m(a)[2].Name),1),u("span",ca,d(m(pe)(m(Pe).state.gameData.workConfig[m(a)[2].ID],0)),1),c(v,{type:"info",onClick:k,icon:"el-icon-d-arrow-left",size:"mini",circle:""}),c(v,{type:"info",icon:"el-icon-d-arrow-right",size:"mini",onClick:D,circle:""}),c(I,{style:{"margin-left":"0.2rem"},modelValue:l.value,"onUpdate:modelValue":p[3]||(p[3]=e=>l.value=e),onChange:s,label:m(a)[2].ID},{default:i((()=>[ia])),_:1},8,["modelValue","label"])]),u("li",ua,[u("span",da,d(m(a)[3].Name),1),u("span",ma,d(m(pe)(m(Pe).state.gameData.workConfig[m(a)[3].ID],0)),1),c(v,{type:"info",onClick:w,icon:"el-icon-d-arrow-left",size:"mini",circle:""}),c(v,{type:"info",icon:"el-icon-d-arrow-right",size:"mini",circle:"",onClick:b}),c(I,{style:{"margin-left":"0.2rem"},modelValue:l.value,"onUpdate:modelValue":p[4]||(p[4]=e=>l.value=e),onChange:s,label:m(a)[3].ID},{default:i((()=>[pa])),_:1},8,["modelValue","label"])])])])}}}),[["__scopeId","data-v-12f7067d"]]);const fa={class:"leftTable"},ga={style:{"font-size":"0.2rem"}},Ca=u("br",null,null,-1),ya={style:{"text-align":"center"}},va=t({setup(e){const a=I((()=>{const e=Pe.state.gameData.sourceArr,a=[];return e.forEach((function(e,t){e.unlock&&a.push(e)})),a}));return(e,t)=>{const l=o("el-popover"),s=o("el-table-column"),p=o("el-table");return n(),r("div",fa,[c(p,{data:m(a),"show-header":!1,stripe:!0,"tooltip-effect":"dark",size:"small"},{default:i((()=>[c(s,{width:"110"},{default:i((({row:e})=>[c(l,{placement:"bottom",trigger:"hover",width:200,transition:""},{reference:i((()=>[u("span",null,d(e.resourceName),1)])),default:i((()=>[u("span",ga,[h(d(e.tip_title)+" ",1),Ca,h(" "+d(e.tip_content),1)])])),_:2},1024)])),_:1}),c(s,null,{default:i((({row:e})=>[u("p",ya,d(e.cacheMaxValue>0?e.curValue+"/"+e.maxValue:e.curValue),1)])),_:1}),c(s,{width:"90"},{default:i((({row:e})=>[u("span",null,d(e.speed+"/s"),1)])),_:1})])),_:1},8,["data"])])}}}),Da=h("家园"),ka=h("研究"),Ia=t({setup(e){const a=v("/game/build");return(e,t)=>{const s=o("el-menu-item"),r=o("el-menu");return n(),l(r,{"default-active":a.value,class:"el-menu-demo",mode:"horizontal",router:"",style:{"margin-bottom":"0.01rem"},"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},{default:i((()=>[c(s,{index:"/game/build"},{default:i((()=>[Da])),_:1}),c(s,{index:"/game/research"},{title:i((()=>[ka])),_:1}),M("",!0),M("",!0)])),_:1},8,["default-active"])}}}),ba=t({setup:e=>(e,a)=>{const t=o("el-timeline-item"),s=o("el-timeline"),u=o("el-scrollbar");return n(),l(u,{height:"6rem"},{default:i((()=>[c(s,{style:{padding:"0.2rem 0.1rem 0.1rem 0.1rem"}},{default:i((()=>[(n(!0),r(k,null,L(m(Pe).state.timelineLogs,((e,a)=>(n(),l(t,{key:a,type:e.iconType,color:e.color,timestamp:e.timestamp,"hide-timestamp":e.logType===m(Ie).ComplainState,class:"timelineItem"},{default:i((()=>[h(d(e.content),1)])),_:2},1032,["type","color","timestamp","hide-timestamp"])))),128))])),_:1})])),_:1})}}),wa=t({setup:e=>(e,a)=>{const t=o("el-progress"),s=o("el-popover");return m(Pe).state.gameData.influenceLevel>=2?(n(),l(s,{key:0,placement:"bottom",title:"Title",width:400,trigger:"hover",content:"详细的速度来源信息，总值和当前值"},{reference:i((()=>[c(t,{"text-inside":!0,"stroke-width":20,percentage:50,status:"exception",class:"head"})])),_:1})):M("",!0)}});const Ma={style:{"font-size":"0.4rem"}},La=t({setup(e){const a=I((()=>{let e=.5;return Pe.state.gameData.influenceLevel>=2&&(e+=.6),e+"rem"}));v("/game/build");const t=I((()=>{const e=Pe.state.gameData.buildArryList.get(se.InfluenceLevel1);return void 0!==e&&e.curValue>0}));return(e,s)=>{const p=o("el-col"),h=o("el-row"),f=o("router-view"),g=o("el-drawer");return n(),r(k,null,[c(h,null,{default:i((()=>[c(p,{span:6,class:"hidden-sm-and-down"}),c(p,{height:m(a),span:12},{default:i((()=>[c(wa)])),_:1},8,["height"])])),_:1}),c(h,{style:{"margin-top":"1rem"},class:"hidden-sm-and-down"},{default:i((()=>[c(p,{span:4}),c(p,{span:5,class:"mainCol",style:{"line-height":"0.1rem"}},{default:i((()=>[c(va),m(t)?(n(),l(ha,{key:0})):M("",!0)])),_:1}),c(p,{span:6,class:"mainCol"},{default:i((()=>[c(Ia),c(f)])),_:1}),c(p,{span:5,class:"mainCol"},{default:i((()=>[c(ba)])),_:1})])),_:1}),c(h,{style:{"margin-top":"1rem"},class:"hidden-md-and-up"},{default:i((()=>[c(p,{span:8,class:"mainCol",style:{"line-height":"0.1rem"}},{default:i((()=>[c(va),m(t)?(n(),l(ha,{key:0})):M("",!0)])),_:1}),c(p,{span:8,class:"mainCol"},{default:i((()=>[c(Ia),c(f)])),_:1}),c(p,{span:8,class:"mainCol"},{default:i((()=>[c(ba)])),_:1})])),_:1}),c(g,{modelValue:m(Pe).state.openGuide,"onUpdate:modelValue":s[0]||(s[0]=e=>m(Pe).state.openGuide=e),title:"指引【ESC关闭】",direction:"rtl",size:"20%","close-on-click-modal":!1,"show-close":!0},{default:i((()=>[u("span",Ma,d(m(U).guideTips[m(Pe).state.guideTipsID]),1)])),_:1},8,["modelValue"])],64)}}});const Va={style:{"font-size":"0.1rem"}};var Aa=P({props:{buildData:{type:Object,required:!0}},methods:{buildItemClick:function(){const e=Pe.state.gameData.sourceArr,a=this.buildData;switch(a.click){case X.Upgrade:const t=K*(a.curValue*a.upgradeCostRatio+Math.pow(a.upgradeCostPower,a.curValue));if(t>e.get(Z.Money).cacheValue)return;e.get(Z.Money).cacheValue-=t,a.curValue++,a.ID===se.InfluenceLevel1&&1===a.curValue&&(Pe.commit(_e,Z.Believer),Pe.commit(xe,{index:Z.Believer,value:1}),ke(3)),a.ID===se.MoneyLevel1&&1===a.curValue&&ke(4),a.ID===se.ResearchLevel1&&1===a.curValue&&ke(5),a.ID===se.InfulenceLevel2&&1===a.curValue&&ke(6),a.ID===se.ResearchLevel2&&1===a.curValue&&ke(7);break;case X.AddInfluence:e.get(Z.Influence).cacheValue+=E;break;case X.AddMoeny:e.get(Z.Money).cacheValue+=E*W;break;case X.AddResearch:e.get(Z.Money).cacheValue>=O&&(e.get(Z.Cost1).cacheValue+=E,e.get(Z.Money).cacheValue-=O)}}}},[["render",function(e,a,t,s,r,m){const p=o("el-button"),f=o("el-popover");return n(),l(f,{placement:"bottom",trigger:"hover",transition:"",width:200},{reference:i((()=>[c(p,{class:"buildItem",type:"info",plain:"",onClick:m.buildItemClick},{default:i((()=>[h(d(t.buildData.buildName)+" ",1),V(u("span",{class:"buildCount"},d(t.buildData.curValue),513),[[A,t.buildData.curValue>0]])])),_:1},8,["onClick"])])),default:i((()=>[u("span",Va,d(t.buildData.baseTips),1)])),_:1})}]]);const xa=u("h3",{class:"CollapsetitleText"},"村口",-1),Ta=u("h3",{class:"CollapsetitleText"},"小镇",-1),Ra=u("h3",{class:"CollapsetitleText"},"县城",-1),Na=u("h3",{class:"CollapsetitleText"},"城市",-1),Ba=u("h3",{class:"CollapsetitleText"},"都市",-1),_a=t({setup(e){const a=v(["0","1","2","3","4"]),t=I((()=>{const e=Pe.state.gameData.buildArryList,a=[];return e.forEach((function(e,t){e.unlock&&0===e.cityName&&a.push(e)})),a})),s=I((()=>{const e=Pe.state.gameData.buildArryList,a=[];return e.forEach((function(e,t){e.unlock&&1===e.cityName&&a.push(e)})),a})),d=I((()=>{const e=Pe.state.gameData.buildArryList,a=[];return e.forEach((function(e,t){e.unlock&&2===e.cityName&&a.push(e)})),a})),p=I((()=>{const e=Pe.state.gameData.buildArryList,a=[];return e.forEach((function(e,t){e.unlock&&3===e.cityName&&a.push(e)})),a})),h=I((()=>{const e=Pe.state.gameData.buildArryList,a=[];return e.forEach((function(e,t){e.unlock&&4===e.cityName&&a.push(e)})),a}));return(e,f)=>{const g=o("el-collapse-item"),C=o("el-collapse");return n(),r("div",null,[c(C,{modelValue:a.value,"onUpdate:modelValue":f[0]||(f[0]=e=>a.value=e)},{default:i((()=>[c(g,{name:"0",class:"Collapsetitle"},{title:i((()=>[xa])),default:i((()=>[u("ul",null,[(n(!0),r(k,null,L(m(t),(e=>(n(),l(Aa,{key:e.ID,"build-data":e},null,8,["build-data"])))),128))])])),_:1}),m(s)&&m(s).length>0?(n(),l(g,{key:0,class:"Collapsetitle",name:"1"},{title:i((()=>[Ta])),default:i((()=>[u("ul",null,[(n(!0),r(k,null,L(m(s),(e=>(n(),l(Aa,{key:e.ID,"build-data":e},null,8,["build-data"])))),128))])])),_:1})):M("",!0),m(d)&&m(d).length>0?(n(),l(g,{key:1,class:"Collapsetitle",name:"2"},{title:i((()=>[Ra])),default:i((()=>[u("ul",null,[(n(!0),r(k,null,L(m(d),(e=>(n(),l(Aa,{key:e.ID,"build-data":e},null,8,["build-data"])))),128))])])),_:1})):M("",!0),m(p)&&m(p).length>0?(n(),l(g,{key:2,class:"Collapsetitle",name:"3"},{title:i((()=>[Na])),default:i((()=>[u("ul",null,[(n(!0),r(k,null,L(m(p),(e=>(n(),l(Aa,{key:e.ID,"build-data":e},null,8,["build-data"])))),128))])])),_:1})):M("",!0),m(h)&&m(h).length>0?(n(),l(g,{key:3,class:"Collapsetitle",name:"4"},{title:i((()=>[Ba])),default:i((()=>[u("ul",null,[(n(!0),r(k,null,L(m(h),(e=>(n(),l(Aa,{key:e.ID,"build-data":e},null,8,["build-data"])))),128))])])),_:1})):M("",!0)])),_:1},8,["modelValue"])])}}}),Ua={style:{"font-size":"0.1rem"}};var Pa=P({props:{researchData:{type:Object,required:!0}},methods:{researchItemClick:function(){const e=this.researchData,a=Pe.state.gameData.sourceArr,t=a.get(Z.Cost1),o=a.get(Z.Cost2),l=a.get(Z.Influence);e.Condition>l.cacheValue||e.Cost1>t.cacheValue||e.Cost2>o.cacheValue||(t.cacheValue-=e.Cost1,o.cacheValue-=e.Cost2,Pe.commit("completeResearch",e.ID),e.UnLock.length>0&&Pe.commit("unlockResearch",e.UnLock),e.ID==ae.BelieverBuildLevel1&&ke(2),e.ID===ae.ComplainUnLock&&ke(8))}}},[["render",function(e,a,t,s,r,m){const p=o("el-button"),f=o("el-popover");return n(),l(f,{placement:"bottom",trigger:"hover"},{reference:i((()=>[c(p,{class:"buildItem",type:"info",plain:"",onClick:m.researchItemClick},{default:i((()=>[h(d(t.researchData.Name),1)])),_:1},8,["onClick"])])),default:i((()=>[u("span",Ua,d(t.researchData.Desc),1)])),_:1})}]]);const Ga=e=>(b("data-v-3aab072f"),e=e(),w(),e),Sa=Ga((()=>u("h3",{class:"CollapsetitleText"},"未完成",-1))),Ea=Ga((()=>u("h3",{class:"CollapsetitleText"},"已完成",-1)));var Wa=P(t({setup(e){const a=v(["0"]),t=I((()=>{const e=[],a=Pe.state.gameData.researchUnLockList,t=Pe.state.gameData.researchComplete;return a.forEach((function(a){t.indexOf(a)<0&&e.push(ie.get(a))})),e})),s=I((()=>{const e=[];return Pe.state.gameData.researchComplete.forEach((function(a){e.push(ie.get(a))})),e}));return(e,d)=>{const p=o("el-collapse-item"),h=o("el-collapse");return n(),r("div",null,[c(h,{modelValue:a.value,"onUpdate:modelValue":d[0]||(d[0]=e=>a.value=e)},{default:i((()=>[c(p,{name:"0",class:"Collapsetitle"},{title:i((()=>[Sa])),default:i((()=>[u("ul",null,[(n(!0),r(k,null,L(m(t),(e=>(n(),l(Pa,{key:e.ID,"research-data":e},null,8,["research-data"])))),128))])])),_:1}),c(p,{name:"1",class:"Collapsetitle"},{title:i((()=>[Ea])),default:i((()=>[u("ul",null,[(n(!0),r(k,null,L(m(s),(e=>(n(),l(Pa,{key:e.ID,class:"buildItem","research-data":e},null,8,["research-data"])))),128))])])),_:1})])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-3aab072f"]]);const Oa=x({history:T(),routes:[{path:"/",name:"home",component:Fe,meta:{isGame:!1}},{path:"/introduction",name:"introduction",component:S,meta:{isGame:!1}},{name:"game",path:"/game",component:La,meta:{isGame:!0},children:[{path:"build",name:"build",component:_a,meta:{isGame:!0}},{path:"research",name:"research",component:Wa,meta:{isGame:!0}}]}]});Oa.afterEach(((e,a)=>{e.meta.isGame?Pe.commit("setGameRunning",!0):Pe.commit("setGameRunning",!1)}));const za=R(_);var qa;za.use(Oa),qa=za,(new Ae).Start(Pe.state),qa.use(Pe),za.use(N),za.use(B),za.mount("#app");
